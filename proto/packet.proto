package cubednet;

message SignedMessage {
    required bytes data = 1;
    required bytes signature = 2;
}

message Packet {
    required uint32 pid = 1;
    required bytes data = 2;
}

message ModDef {
    required string name = 1;
    required uint32 version = 2;
    required bool enabled = 3;
}

// Client -> Server
message PacketStatusRequest {
    required bytes data = 1;
    required int64 a1 = 2;
    required int64 a2 = 3;
}

// Server -> Client
message PacketStatusResponse {
    required string name = 1;
    required string motd = 2;
    required uint32 players = 3;
    required uint32 version = 4;
    required bytes pubkey = 5;
    required SignedMessage data = 6;
}

message PacketHello {
    required string username = 1;
    required string hashcode = 2;
    required uint32 version = 3;

    repeated ModDef mods = 4;
}

message PacketDisconnect {
    required uint32 reason = 1;
    required string desc = 2;
}
